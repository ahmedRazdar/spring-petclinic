# How to Generate JaCoCo Report Locally

**Date:** December 8, 2024

---

## ğŸš€ Quick Command

```powershell
# Generate coverage report (runs tests + generates report)
./mvnw -DskipFormatValidation=true clean test jacoco:report
```

---

## ğŸ“‹ Step-by-Step Process

### Step 1: Run Tests with Coverage Collection

```powershell
./mvnw -DskipFormatValidation=true clean test
```

**What happens:**
- JaCoCo agent (`prepare-agent`) automatically attaches during test execution
- Coverage data is collected and saved to `target/jacoco.exec`

### Step 2: Generate Coverage Report

```powershell
./mvnw jacoco:report
```

**What happens:**
- Reads coverage data from `target/jacoco.exec`
- Generates HTML and XML reports in `target/site/jacoco/`

### Step 3: View Report

Open in browser:
```
target/site/jacoco/index.html
```

---

## ğŸ“Š Report Files Generated

After running `jacoco:report`, you'll find:

```
target/site/jacoco/
â”œâ”€â”€ index.html          # Main HTML report (open this in browser)
â”œâ”€â”€ jacoco.xml          # XML report (for CI/CD tools like Codecov)
â”œâ”€â”€ jacoco.csv          # CSV report
â”œâ”€â”€ jacoco.exec         # Binary coverage data (in target/ directory)
â””â”€â”€ [package folders]/  # Detailed coverage by package
```

---

## ğŸ” Verify Report Generation

### Check if report exists:
```powershell
Test-Path target\site\jacoco\index.html
```

### List report files:
```powershell
Get-ChildItem target\site\jacoco -Recurse
```

### Open report in browser:
```powershell
Start-Process target\site\jacoco\index.html
```

---

## âš ï¸ Troubleshooting

### Issue: Report not generated

**Check:**
1. Tests must run successfully (coverage data collected)
2. `target/jacoco.exec` file must exist
3. `jacoco:report` goal must execute

**Solution:**
```powershell
# Check if coverage data exists
Test-Path target\jacoco.exec

# If not, run tests first
./mvnw -DskipFormatValidation=true test

# Then generate report
./mvnw jacoco:report
```

### Issue: Tests failing

**Solution:**
- Fix test failures first
- Or skip failing tests: `./mvnw -DskipFormatValidation=true -Dmaven.test.failure.ignore=true test jacoco:report`

### Issue: Format validation blocking

**Solution:**
- Use `-DskipFormatValidation=true` flag
- Or fix formatting: `./mvnw spring-javaformat:apply`

---

## ğŸ“ˆ What the Report Shows

The JaCoCo HTML report displays:

1. **Coverage Overview:**
   - Total line coverage percentage
   - Total branch coverage percentage
   - Total method coverage percentage
   - Total class coverage percentage

2. **Package-Level Coverage:**
   - Coverage for each package
   - Drill down to see class-level coverage

3. **Class-Level Coverage:**
   - Line-by-line coverage
   - Green = covered
   - Red = not covered
   - Yellow = partially covered

4. **Source Code View:**
   - See exactly which lines are covered
   - Identify untested code

---

## ğŸ¯ Coverage Goals

Typical coverage targets:
- **Line Coverage:** > 80%
- **Branch Coverage:** > 75%
- **Method Coverage:** > 80%
- **Class Coverage:** > 90%

---

## âœ… Verification Checklist

- [ ] Tests run successfully
- [ ] `target/jacoco.exec` file exists
- [ ] `target/site/jacoco/index.html` exists
- [ ] Report opens in browser
- [ ] Coverage metrics are visible

---

## ğŸ“ Notes

- **Coverage data** (`jacoco.exec`) is generated during test execution
- **Reports** are generated by the `report` goal
- Reports are **not** generated automatically - you must run `jacoco:report`
- In CI/CD, reports are generated during the `prepare-package` phase automatically

---

**Status:** Tests are running in the background. Once complete, run `./mvnw jacoco:report` to generate the report.



